import React from "react";
import {
  SettingOutlined,
  UserOutlined,
  UserAddOutlined,
  LogoutOutlined,
} from "@ant-design/icons";
import { Link } from "react-router-dom";
import firebase from "firebase";
import { useDispatch, useSelector } from "react-redux";
import { useHistory } from "react-router-dom";
import "./Header.css";
import "antd/dist/antd.css";
import Dropdowns from "./Dropdowns";

const Header = () => {
  let dispatch = useDispatch();
  let { user } = useSelector((state) => ({ ...state }));

  let history = useHistory();

  const logout = () => {
    firebase.auth().signOut();
    dispatch({
      type: "LOGOUT",
      payload: null,
    });
    history.push("/login");
  };

  return (
    <div className="h px-4">
      <div className="back  d-flex justify-content-between">
        <div className="logo pt-2 pl-4 float-left">
          <h1 className="text-light">
            <Link to="/">
              <svg
                width="118"
                height="40"
                viewBox="0 0 118 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M68.428 18.234C67.732 18.234 67.066 18.156 66.43 18C65.806 17.844 65.266 17.634 64.81 17.37L65.026 14.958C65.566 15.294 66.13 15.558 66.718 15.75C67.318 15.93 67.87 16.02 68.374 16.02C68.95 16.02 69.418 15.9 69.778 15.66C70.138 15.42 70.318 15.102 70.318 14.706C70.318 14.382 70.198 14.136 69.958 13.968C69.718 13.788 69.34 13.596 68.824 13.392L68.392 13.212C68.332 13.188 68.266 13.164 68.194 13.14C68.122 13.104 68.038 13.068 67.942 13.032C67.27 12.756 66.73 12.498 66.322 12.258C65.914 12.006 65.56 11.658 65.26 11.214C64.972 10.77 64.828 10.194 64.828 9.486C64.828 8.334 65.218 7.428 65.998 6.768C66.778 6.108 67.864 5.778 69.256 5.778C70.312 5.778 71.392 5.994 72.496 6.426L72.1 8.802C71.656 8.55 71.176 8.352 70.66 8.208C70.156 8.064 69.676 7.992 69.22 7.992C68.656 7.992 68.218 8.106 67.906 8.334C67.594 8.55 67.438 8.844 67.438 9.216C67.438 9.54 67.546 9.792 67.762 9.972C67.978 10.152 68.326 10.344 68.806 10.548L69.544 10.836C70.24 11.1 70.816 11.358 71.272 11.61C71.728 11.862 72.118 12.228 72.442 12.708C72.766 13.176 72.928 13.788 72.928 14.544C72.928 15.708 72.532 16.614 71.74 17.262C70.948 17.91 69.844 18.234 68.428 18.234ZM78.0466 18.27C77.1826 18.27 76.5106 18.054 76.0306 17.622C75.5626 17.178 75.3286 16.554 75.3286 15.75V10.908H73.8886V8.73H75.3286V6.75C76.1806 6.606 77.0206 6.498 77.8486 6.426V8.73H80.1886V10.908H77.8486V15.282C77.8486 15.534 77.9206 15.726 78.0646 15.858C78.2206 15.99 78.4366 16.056 78.7126 16.056C79.0486 16.056 79.4326 15.978 79.8646 15.822L80.4226 17.73C79.6546 18.09 78.8626 18.27 78.0466 18.27ZM85.2988 18.252C84.3148 18.252 83.5408 17.952 82.9768 17.352C82.4128 16.752 82.1308 15.93 82.1308 14.886V8.73H84.6688V14.472C84.6688 14.964 84.7888 15.348 85.0288 15.624C85.2688 15.888 85.5928 16.02 86.0008 16.02C86.4088 16.02 86.7988 15.888 87.1708 15.624C87.5548 15.36 87.8728 15.006 88.1248 14.562V8.73H90.6628V18H88.1248V16.776C87.7768 17.244 87.3748 17.61 86.9188 17.874C86.4748 18.126 85.9348 18.252 85.2988 18.252ZM95.8942 18.27C94.8502 18.27 94.0282 17.874 93.4282 17.082C92.8402 16.278 92.5462 15.162 92.5462 13.734C92.5462 12.042 92.9842 10.746 93.8602 9.846C94.7482 8.934 96.0082 8.478 97.6402 8.478C97.8442 8.478 98.1502 8.49 98.5582 8.514V4.86H101.06V18H98.5942L98.6482 16.794H98.5762C98.2642 17.274 97.8802 17.64 97.4242 17.892C96.9802 18.144 96.4702 18.27 95.8942 18.27ZM96.4702 16.056C96.8542 16.056 97.2262 15.894 97.5862 15.57C97.9462 15.234 98.2702 14.76 98.5582 14.148V10.854C98.1502 10.746 97.7602 10.692 97.3882 10.692C96.6322 10.692 96.0562 10.938 95.6602 11.43C95.2762 11.922 95.0842 12.642 95.0842 13.59C95.0842 14.358 95.2042 14.964 95.4442 15.408C95.6962 15.84 96.0382 16.056 96.4702 16.056ZM104.787 22.032C104.235 22.032 103.659 21.9 103.059 21.636L103.437 19.548C103.893 19.776 104.277 19.89 104.589 19.89C104.961 19.89 105.237 19.77 105.417 19.53C105.609 19.29 105.813 18.87 106.029 18.27L102.411 8.766L105.039 8.55L107.253 15.192L109.305 8.73H111.807C111.039 11.058 110.229 13.35 109.377 15.606C108.537 17.862 107.883 19.41 107.415 20.25C107.079 20.85 106.701 21.294 106.281 21.582C105.873 21.882 105.375 22.032 104.787 22.032ZM67.888 35.54L67.132 44H64.81L65.944 32.012H69.184L72.244 40.616L75.214 32.012H78.454L79.552 44H77.212L76.384 35.576L73.216 44.126L71.074 44.324L67.888 35.54ZM84.2524 44.27C83.2924 44.27 82.5304 43.862 81.9664 43.046C81.4024 42.23 81.1204 41.12 81.1204 39.716C81.1204 38.012 81.5524 36.716 82.4164 35.828C83.2804 34.928 84.5224 34.478 86.1424 34.478C87.0544 34.478 88.1224 34.622 89.3464 34.91V44H86.9344L86.9884 42.524H86.9164C86.6044 43.088 86.2204 43.52 85.7644 43.82C85.3204 44.12 84.8164 44.27 84.2524 44.27ZM84.7924 42.056C85.1644 42.056 85.5304 41.858 85.8904 41.462C86.2504 41.066 86.5864 40.538 86.8984 39.878V36.854C86.5144 36.746 86.1304 36.692 85.7464 36.692C85.0264 36.692 84.4804 36.938 84.1084 37.43C83.7484 37.922 83.5684 38.648 83.5684 39.608C83.5684 40.364 83.6764 40.964 83.8924 41.408C84.1084 41.84 84.4084 42.056 84.7924 42.056ZM90.7209 34.766L93.4929 34.514L95.5449 41.192L97.5069 34.73H100.225L96.9669 44H93.9969L90.7209 34.766ZM102.812 30.86H105.711V33.2H102.812V30.86ZM101.409 41.822H103.137V36.908H101.409V34.73H105.675V41.822H107.223V44H101.409V41.822ZM108.904 34.73H111.388V36.332C111.772 35.696 112.216 35.228 112.72 34.928C113.224 34.628 113.812 34.478 114.484 34.478C115.48 34.478 116.26 34.778 116.824 35.378C117.388 35.966 117.67 36.788 117.67 37.844V44H115.132V38.24C115.132 37.76 115.012 37.388 114.772 37.124C114.532 36.848 114.208 36.71 113.8 36.71C113.32 36.71 112.864 36.89 112.432 37.25C112 37.61 111.67 38.066 111.442 38.618V44H108.904V34.73Z"
                  fill="#535353"
                />
                <path
                  d="M12 40.9961C12 40.446 12.446 40 12.9961 40H47.0381C47.5882 40 48.0342 40.446 48.0342 40.9961V40.9961C48.0342 41.5462 47.5882 41.9922 47.0381 41.9922H12.9961C12.446 41.9922 12 41.5462 12 40.9961V40.9961Z"
                  fill="#FFAE00"
                />
                <path
                  d="M57.2993 35.5904V24.6C57.2993 21.5026 54.2706 18.9828 50.5478 18.9828H48.6048C48.2204 17.8566 46.974 17.0289 45.4989 17.0289H44.3247C42.5442 17.0289 41.0958 18.2341 41.0958 19.7154C41.0958 21.1967 42.5442 22.402 44.3247 22.402H45.4989C46.974 22.402 48.2204 21.5743 48.6048 20.4481H50.5478C53.2995 20.4481 55.538 22.3106 55.538 24.6V35.5904H50.2543V31.2282C50.2543 28.1968 47.7856 25.566 44.2509 24.8308L35.6946 23.0511V20.7954C37.4924 19.4712 38.63 17.5335 38.63 15.3765C38.63 14.3458 38.63 7.26546 38.63 6.27056L42.1525 5.41576V9.53495C41.1276 9.8374 40.3913 10.6519 40.3913 11.607V14.1958H45.675V11.607C45.675 10.6519 44.9387 9.8374 43.9138 9.53495V4.98835L47.235 4.18239L29.9999 0L12.7649 4.18239L21.3699 6.27056V15.3765C21.3699 17.5335 22.5075 19.4711 24.3053 20.7954V23.0511L15.749 24.8308C12.2143 25.566 9.7456 28.1968 9.7456 31.2282V35.5904H0V40.0714L2.62004 45.8481H4.46184V50H6.22309V45.8481H53.7769V50H55.5382V45.8481H57.38L60 40.0714V35.5904H57.2993ZM45.4989 20.9366H44.3247C43.5154 20.9366 42.857 20.3888 42.857 19.7154C42.857 19.042 43.5154 18.4943 44.3247 18.4943H45.4989C46.3083 18.4943 46.9666 19.042 46.9666 19.7154C46.9666 20.3888 46.3083 20.9366 45.4989 20.9366ZM43.0331 10.8743C43.5188 10.8743 43.9138 11.2029 43.9138 11.607V12.7305H42.1525C42.2443 12.2994 41.7689 10.8743 43.0331 10.8743ZM43.8237 26.2525C46.573 26.8244 48.493 28.8705 48.493 31.2283V35.5905H43.4441V31.5363H41.6829V35.5905H33.1705L39.2082 25.2925L43.8237 26.2525ZM32.6418 33.15V28.107L35.123 28.918L32.6418 33.15ZM37.4616 24.9291L35.8976 27.5968L31.8403 26.2706L34.9926 24.4155L37.4616 24.9291ZM29.9999 25.5588L26.0664 23.244V21.8005C28.5113 22.8528 31.4395 22.8738 33.9333 21.8005V23.244L29.9999 25.5588ZM30.8805 27.5313V35.5905H29.1193V27.5313L29.9999 27.2435L30.8805 27.5313ZM36.8688 10.5146C36.5377 10.8454 35.0529 11.949 29.9999 11.949C24.9469 11.949 23.4621 10.8454 23.131 10.5146V6.69797L29.9999 8.36479L36.8688 6.69797V10.5146ZM19.055 4.18239L29.9999 1.52634L40.9448 4.18239L29.9999 6.83845L19.055 4.18239ZM23.131 15.3765V12.3315C24.3678 12.8923 26.4672 13.4143 29.9999 13.4143C33.5326 13.4143 35.632 12.8923 36.8688 12.3315V15.3765C36.8688 18.5501 33.7874 21.132 29.9999 21.132C26.2124 21.132 23.131 18.5502 23.131 15.3765V15.3765ZM25.0072 24.4155L28.1595 26.2706L24.1022 27.5968L22.5382 24.9291L25.0072 24.4155ZM27.358 28.107V33.15L24.8768 28.9179L27.358 28.107ZM11.5067 31.2282C11.5067 28.8704 13.4269 26.8243 16.176 26.2524L20.7916 25.2924L26.8293 35.5904H18.3169V31.5362H16.5557V35.5904H11.5067V31.2282ZM58.2386 39.8041L56.162 44.3827H3.83777L1.76114 39.8041V37.0558H58.2386V39.8041Z"
                  fill="#00BB96"
                />
              </svg>
            </Link>
          </h1>
        </div>
        <Dropdowns />

        <div className="hi">
          {!user && (
            <div className="dropdown">
              <button className="dropbtn">
                {" "}
                <Link to="/register" className="fi">
                  <UserAddOutlined />
                  Register
                </Link>{" "}
              </button>
            </div>
          )}

          {!user && (
            <div className="dropdown">
              <button className="dropbtn">
                {" "}
                <Link to="/login" className="fi">
                  <UserOutlined />
                  Login
                </Link>{" "}
              </button>
            </div>
          )}
          {user && (
            <div className="dropdown">
              <button className="dropbtn">
                <SettingOutlined /> {user.email && user.email.split("@")[0]}
              </button>
              <div className="dropdown-content">
                {user && user.role === "subscriber" && (
                  <Link to="/user/history" className="fi">
                    hDashboard
                  </Link>
                )}
                {user && user.role === "admin" && (
                  <Link to="/admin/dashboard" className="fi">
                    aDashboard
                  </Link>
                )}

                <a onClick={logout}>
                  <LogoutOutlined /> Logout
                </a>
                <a href="#">Link 1</a>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default Header;
